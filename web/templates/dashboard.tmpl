{{ define "dashboard" }}
{{ template "base_top" . }}
<article>
  <h3>Your athletes</h3>

  {{ if not .Athletes }}
    <p>No athletes yet.</p>
  {{ else }}
    <table>
      <thead>
        <tr><th>Name</th><th>Email</th><th>Strava</th><th>Actions</th></tr>
      </thead>
      <tbody>
        {{ range .Athletes }}
          <tr>
            <td>{{ .Name }}</td>
            <td>
              {{ if .Email.Valid }}{{ .Email.String }}{{ else }}â€”{{ end }}
            </td>
            <td>
              {{ if .StravaAccessToken.Valid }}Connected{{ else }}Not connected{{ end }}
            </td>
            <td>
              <a href="/athletes/{{ .ID }}/workouts" style="color: blue; text-decoration: underline;">View Workouts</a>
            </td>
          </tr>
        {{ end }}
      </tbody>
    </table>
  {{ end }}

  <details style="margin-top:1rem">
    <summary>Add new athlete</summary>
    <form method="post" action="/athletes">
      <input name="name" placeholder="Athlete name" required>
      <input name="email" type="email" placeholder="Athlete email (required)" required>
      <button type="submit">Create & get invite link</button>
    </form>
  </details>
</article>
{{ template "base_bottom" . }}
{{ end }}

